<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!--jQuery 스크립트 -->
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>

<div>
    <div>
        <form action="{% url 'alcoldrinks:createalcol' %}" method="post">
            <input type="text" id="input_name" placeholder="name">
            <input type="text" id="input_inventory" placeholder="inventory">
            <input type="text" id="input_price" placeholder="price">
            <input type="text" id="input_alcol_type" placeholder="alcol_type">
            <input type="text" id="input_drink_type" placeholder="drink_type">
            <input type="image" id="input_image">
            <button id="create_alcol_button" type="button"></button>
        </form>
    </div>
    <div>

    </div>
    <!-- 첫번 째 모달 -->
    <div id="first_modal" class="modal_overlay">django_session
        <div class="modal_window">
            <div style="border-bottom:solid 1px gray;display: flex; flex-direction: row; justify-content: space-between;">
                <div style="width: 40px; background: gray">

                </div>
                <div>
                    새 이미지 업로a드
                </div>
                <div style="width: 40px; background: gray">
                    <span class="modal_close material-icons-outlined">close</span>
                </div>
            </div>

            <div class="img_upload_space" style=" width: 778px; height:540px;margin-top: 10px; ">

            </div>
        </div>
    </div>
    <!-- 두번 째 모달 -->
    <div id="second_modal" class="modal_overlay">
        <div class="modal_window">
            <div style="display: flex; flex-direction: row; justify-content: space-between;">
                <div style="width: 40px; background: gray">

                </div>
                <div>
                    새 이미지 업로드
                </div>
                <div style="width: 40px; background: gray">
                    <span class="modal_close material-icons-outlined">close</span>
                </div>
            </div>
            <div style="border-top: solid 1px gray; display: flex ;flex-direction: row;margin-top: 10px; ">
                <div class="img_upload_space" style="width: 500px; height:540px;">

                </div>
                <div style="border-left: solid 1px gray">
                    <div>
                        <textarea id="input_feed_content" class="form-control" style="width: 276px; height: 400px"
                                  id="exampleFormControlTextArea1" rows="5"></textarea>
                    </div>
                    <button id="feed_create_button" type="button" class="btn btn-primary" style="width: 100%;">
                        공유하기
                    </button>
                </div>

            </div>
        </div>
    </div>
</div>

<script>
    $('#create_alcol_button').click(function () {


        let email = $('#input_email').val();
        let password = $('#input_password').val();

        $.ajax({
            url: "{% url 'alcoldrinks:createalcol' %}",
            data: {
                email: email,
                password: password,
            },
            method: "POST",
            <!--processData: false,django.db.utils.IntegrityError: NOT NULL constraint failed: User.name 이거 지우니까 이 오류 사라짐-->
            success: function (data) {
                console.log("성공");
                alert('로그인 성공')
                location.replace('/main')
            },
            error: function (request, status, error) {
                console.log("에러");
            },
            complle: function () {
                console.log("완료");
            }
        });

    });

    $('#nav_bar_add_box').click(function () {
        $('#first_modal').css({
            display: 'flex'
        });


        $(document.body).css({ // 스크롤 없애는 기능
            overflow: 'hidden'
        });
    });

    $(".modal_close").click(function () {
        $('#first_modal').css({
            display: 'none'
        });
        $('#second_modal').css({
            display: 'none'
        });
    });
</script>

</body>
</html>